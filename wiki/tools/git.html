<!DOCTYPE html>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<meta http-equiv="Content-Style-Type" content="text/css" />
<meta name="generator" content="pandoc" />




<link rel="stylesheet" href="../../style.css" type="text/css" />



</head>


<body>
<div id="all">

<div id="all">
    <div id="header">
        <ul id="top-nav">
            <li>
            <a href="http://metman.info/wiki/index.html">Wiki首页</a>
            </li>
            <li>
            <a href="http://metman.info">Blog首页</a>
            </li>
            <li>
            <a href="/about.html">about</a>
            </li>
        </ul>
</div>
<p>date: 2014-03-19</p>

 <!--if(title)-->

<p>目录:</p>
<div id="TOC">
<ul>
<li><a href="#git常用技巧收集">git常用技巧收集</a><ul>
<li><a href="#打包某一tag版本">打包某一tag版本</a></li>
<li><a href="#小版本commit回滚合并">小版本commit、回滚、合并</a></li>
<li><a href="#tig">tig</a></li>
<li><a href="#git-diff">git diff</a></li>
</ul></li>
</ul>
</div>
 <!--if(toc)-->

<h2 id="git常用技巧收集">git常用技巧收集</h2>
<!---date:2014-03-19-->

<h3 id="打包某一tag版本">打包某一tag版本</h3>
<pre><code> cd myproject #进入项目工作目录
 git tag      #查看tag
 git archive --format=tar --prefix=myproject/ tag_name |gzip &gt; myproject.tar.gz</code></pre>
<h3 id="小版本commit回滚合并">小版本commit、回滚、合并</h3>
<ul>
<li>建议每隔一小段代码就commit一次，快捷命令<code>git ci</code>（实际是<code>git commit -a -v</code>，对修改或删除文件进行stage，但新文件不会被跟踪，是用来省略<code>git add .</code>这个过程。在~/.gitconfig配置），这样完成一个功能就会commit多次。小版本commit好处是发现错误容易回滚回去，重新来过。</li>
<li>版本回滚（即撤消）
<ul>
<li>回滚单文件（未commit）：<code>git checkout filename</code></li>
<li>回滚所以修改文件(未commit)： <code>git throw</code> = <code>git reset --hard HEAD</code></li>
<li>回滚到上一个commit（已commit）： <code>git throwh</code> = <code>git reset --hard HEAD^</code></li>
</ul></li>
<li>合并多个小版本</li>
</ul>
<p>当多个小的commit完全一个功能性问题后(可以使用相同的commit信息用于后面区别、合并)，想要把这几个commit合并成一个具有代表性的commit。比如说合并3个commit，首先， <code>git rebase -i HEAD~~~</code>（或<code>git rebase -i HEAD~3</code>或<code>git rebase -i 版本号</code>），进入rebase界面，把除了第一<code>pick</code>，其他所有<code>pick</code>改为<code>s</code>，保存推出，又进入到了commit信息中，把几个commit信息删去只写一个commit信息用于总结这个功能，最后push到github上。</p>
<p><a href="http://happycasts.net/episodes/92">http://happycasts.net/episodes/92</a></p>
<h3 id="tig">tig</h3>
<p><code>git commit</code> 只追踪已提交文件，新创建文件需要先<code>git add</code></p>
<p><code>git commit -a</code> 可提交多行信息</p>
<p><code>git commit -a -v</code> 还可以看到详细的修改内容</p>
<p><code>git blame filename</code> 文件每一行修改历史</p>
<p><code>tig</code> git前端，显示版本信息 <code>sudo apt-get install tig</code>。按<code>d</code>进入diff，<code>q</code>退出。</p>
<p><code>tig filename</code> 单个文件的commit历史 <code>tig blame filename</code> 等价于<code>git blame filename</code>，但显示更好</p>
<p><a href="http://happycasts.net/episodes/4?autoplay=true">http://happycasts.net/episodes/4?autoplay=true</a></p>
<h3 id="git-diff">git diff</h3>
<ul>
<li>diff</li>
</ul>
<p>Linux系统自带的<code>diff</code>命令，查看两个比较类似的东西的差异，这两个东西可以分别是单个文件，也可以是目录（包含多个文件）。</p>
<pre><code>diff -u file1 file2        #单文件
diff -Nurp dir1 dir2   #目录</code></pre>
<ul>
<li>git diff</li>
</ul>
<p>git有三个区：工作区、暂存区、git仓库。见图</p>
<div class="figure">
<img src="images/git_concept.jpg" alt="git三个重要分区" /><p class="caption">git三个重要分区</p>
</div>
<ul>
<li>git仓库/目录对应 <code>.git</code>目录;</li>
<li>工作区对应项目目录下除了<code>.git</code>的目录内所有内容;</li>
<li>暂存区对应<code>.git/index</code>。</li>
</ul>
<h4 id="git-diff核心内容">git diff核心内容</h4>
<ul>
<li><code>git diff</code> 用来查看我们在最新版本之上做的所有修改之中还没有放到 staging area 中的这部分，即工作区 .vs. Staging area。</li>
<li><code>git diff --staged</code> 用来查看 staging area 中的内容，也就是下次将要被做到下个版本之中去的内容，等价于<code>git diff --cached</code>，即Staging area .vs. Repos。</li>
<li><code>git diff HEAD</code> 以上两者之和，用来看总共的修改内容。</li>
</ul>
<p>git最新的版本号（40位 sha1 哈希）,别名<code>HEAD</code></p>
<ul>
<li><code>git diff one_commit_hash another_commit_hash</code> 查看新老两个版本之间的 diff</li>
<li><code>git diff filename</code>或者 <code>git diff dirname/</code>查看指定文件或目录的修改</li>
<li><code>git diff one_branch_name another_branch_name</code> 对比两个分支之间的差异</li>
</ul>

<!--Baidu tongji-->
<!--
<script>
    var _hmt = _hmt || [];
    (function() {
        var hm = document.createElement("script");
        hm.src = "//hm.baidu.com/hm.js?c33f8eb1bbd2cf29ae19a3492ccca0c6";
        var s = document.getElementsByTagName("script")[0]; 
        s.parentNode.insertBefore(hm, s);
    })();
</script>
-->
<!--Baidu tongji-->
<div id="footer">
    <p class="footer_subline">Contact: jiangqingu@gmail.com</p>
</div>
</div> <!--all-->
</body>
</html>
